import{r,C as x,A as m,u as h,j as e,L as p}from"./index-BKzFXWaZ.js";import{o as f}from"./orderService-D8UNEXes.js";const g=()=>{const{cartItems:a,removeFromCart:c}=r.useContext(x),{user:o}=r.useContext(m),n=h(),i=async()=>{if(!o)n("/login?redirect=cart");else{const s=a.map(t=>({product:t._id||t.id,title:t.title,image:t.image,price:t.price,qty:1}));try{await f.create({orderItems:s,paymentMethod:"Credit Card",totalPrice:l}),alert("Order Placed Successfully!"),localStorage.removeItem("cartItems"),window.location.href="/profile"}catch(t){console.error(t),alert("Order Failed")}}},l=a.reduce((s,t)=>{const d=Number(t.price.replace(/[^0-9.-]+/g,""));return s+d},0);return a.length===0?e.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Your cart is empty"}),e.jsx(p,{to:"/templates",className:"bg-[#0055FF] text-white px-6 py-3 rounded-full font-bold",children:"Browse Templates"})]}):e.jsx("div",{className:"min-h-screen bg-[#F5F5F7] px-6 py-20 font-sans",children:e.jsxs("div",{className:"max-w-[1000px] mx-auto",children:[e.jsx("h1",{className:"text-4xl font-black text-black mb-10",children:"Your Cart"}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-10",children:[e.jsx("div",{className:"flex-grow flex flex-col gap-6",children:a.map(s=>e.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm flex items-center gap-6",children:[e.jsx("img",{src:s.image,alt:s.title,className:"w-24 h-24 object-cover rounded-xl bg-gray-100"}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("h3",{className:"text-xl font-bold text-black",children:s.title}),e.jsx("p",{className:"text-gray-500 text-sm",children:s.category}),e.jsx("h4",{className:"text-lg font-bold text-[#0055FF] mt-1",children:s.price})]}),e.jsx("button",{onClick:()=>c(s._id||s.id),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx("svg",{className:"w-6 h-6 text-gray-400 hover:text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},s._id||s.id))}),e.jsx("div",{className:"w-full lg:w-[350px]",children:e.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-gray-100 sticky top-24",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Summary"}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("span",{className:"text-gray-500",children:"Subtotal"}),e.jsxs("span",{className:"font-bold",children:["$",l]})]}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("span",{className:"text-gray-500",children:"Tax"}),e.jsx("span",{className:"font-bold",children:"$0"})]}),e.jsx("div",{className:"h-px bg-gray-100 w-full mb-6"}),e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("span",{className:"text-xl font-bold",children:"Total"}),e.jsxs("span",{className:"text-2xl font-black text-[#0055FF]",children:["$",l]})]}),e.jsx("button",{onClick:i,className:"w-full bg-black text-white py-4 rounded-xl font-bold hover:bg-gray-800 transition-colors shadow-lg shadow-black/20",children:"Checkout"})]})})]})]})})};export{g as default};
